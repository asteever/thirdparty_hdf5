# HDF5 Library Makefile(.in)
#
# Copyright (C) 1997 National Center for Supercomputing Applications.
#                    All rights reserved.
#
# 
@COMMENCE@

# Add include directory to the C preprocessor flags.
CPPFLAGS=-I../src -I. @CPPFLAGS@

# Tools test targets.
# Use /bin/sh to use because the test is actually a shell script file.
TESTS=testh5dump
RUNTEST=/bin/sh

# These are our main targets:
PROGS=h5debug h5import h5ls h5repart h5dump
LIB=libh5tools.a
LIBS=../src/libhdf5.a libh5tools.a @LIBS@

# Source and object files for the library.
LIB_SRC=h5tools.c
LIB_OBJ=$(LIB_SRC:.c=.o)

# Source and object files for programs...
PROG_SRC=h5debug.c h5import.c h5ls.c h5repart.c h5dump.c h5dumputil.c
PROG_OBJ=$(PROG_SRC:.c=.o)
PRIVATE_HDR=h5tools.h

# Programs have to be built before they can be tested!
test _test: $(PROGS)

# How to build the programs...
h5debug: h5debug.o $(LIB) ../src/libhdf5.a
	$(CC) $(CFLAGS) -o $@ h5debug.o $(LIBS)

h5import: h5import.o $(LIB) ../src/libhdf5.a
	$(CC) $(CFLAGS) -o $@ h5import.o $(LIBS)

h5ls: h5ls.o $(LIB) ../src/libhdf5.a
	$(CC) $(CFLAGS) -o $@ h5ls.o $(LIBS)

h5repart: h5repart.o $(LIB) ../src/libhdf5.a
	$(CC) $(CFLAGS) -o $@ h5repart.o $(LIBS)

h5dump: h5dump.o h5dumputil.o $(LIB) ../src/libhdf5.a
	$(CC) $(CFLAGS) -o $@ h5dump.o h5dumputil.o $(LIBS)

testh5dump: testh5dump.sh
	cp testh5dump.sh $@

@CONCLUDE@
