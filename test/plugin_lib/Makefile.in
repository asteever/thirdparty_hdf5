# Copyright by The HDF Group.
# Copyright by the Board of Trustees of the University of Illinois.
# All rights reserved.
#
# This file is part of HDF5.  The full HDF5 copyright notice, including
# terms governing use, modification, and redistribution, is contained in
# the files COPYING and Copyright.html.  COPYING can be found at the root
# of the source code distribution tree; Copyright.html can be found at the
# root level of an installed copy of the electronic HDF5 document set and
# is linked from the top-level documents page.  It can also be found at
# http://hdfgroup.org/HDF5/doc/Copyright.html.  If you do not have
# access to either file, you may request a copy from help@hdfgroup.org.
#
# HDF5 Library Test Makefile(.in)
#
# This Makefile.in is NOT generated by automake.  Since we want to build 
# shared libraries for testing, automake can't create shared libraries when
# configure asks to build static library.
#
CFLAGS = -fPIC -g
CC = @CC@
SRCDIR = @srcdir@
TOP_SRCDIR = @top_srcdir@
TOP_BUILDDIR = @top_builddir@
MAJOR = 0
MINOR = 1
NAME1 = dynlib1
VERSION = $(MAJOR).$(MINOR)

# Include files in hdf5/src build/src directories for hdf5.h and H5pubconf.h
INCLUDES = -I$(TOP_SRCDIR)/src -I$(TOP_BUILDDIR)/src

lib: lib$(NAME1).so.$(VERSION)

$(NAME1).o: $(SRCDIR)/$(NAME1).c
	$(CC) $(CFLAGS) $(INCLUDES) -c $(SRCDIR)/$(NAME1).c

lib$(NAME1).so.$(VERSION): $(NAME1).o
	$(CC) -shared $^ -o $@

clean:
	$(RM) *.o *.so* Makefile

distclean:
	$(RM) *.o *.so* Makefile
